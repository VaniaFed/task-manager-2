!function(){"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),function(){var e;t.g.importScripts&&(e=t.g.location+"");var o=t.g.document;if(!e&&o&&(o.currentScript&&(e=o.currentScript.src),!e)){var s=o.getElementsByTagName("script");s.length&&(e=s[s.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e}();t.p;const e=document.querySelector(".todo-title").childNodes[0],o=t=>{switch(t){case"All":e.textContent="Все задачи";break;case"Active":e.textContent="Активные";break;case"Completed":e.textContent="Завершенные"}},s=document.querySelector(".todo-title__counter"),c=t=>{s.textContent=`(${t})`},n=()=>{"All"===i()?c(F().length):c(P(i()).length)},r=document.querySelectorAll(".filter__item"),a=()=>JSON.parse(localStorage.getItem("filter"))||"All";let l=a();const i=()=>l||a(),d=t=>{l=t,(t=>{localStorage.setItem("filter",JSON.stringify(t))})(t)},u=t=>{t.forEach((t=>{t.classList.remove("filter__item_active")}))},m=t=>{t.classList.add("filter__item_active")},p=document.querySelectorAll(".filter__item"),_=()=>[...p].filter((t=>t.dataset.filter===i()))[0],f=document.querySelector("[data-filter-counter=All]"),h=document.querySelector("[data-filter-counter=Active]"),y=document.querySelector("[data-filter-counter=Completed]"),v=()=>{const t=F(),e=P("Active"),o=P("Completed");f.textContent=String(t.length),h.textContent=String(e.length),y.textContent=String(o.length)},g=document.querySelector(".clear-completed"),k=()=>{P("Completed").length>0?g.classList.remove("hidden"):g.classList.add("hidden")},S=()=>0===F().length&&"All"===i()||0===P("Active").length&&"Active"===i()||0===P("Completed").length&&"Completed"===i(),L=document.querySelector(".empty-state"),b=()=>{L.classList.add("hidden")},E=()=>{L.classList.remove("hidden"),(()=>{const t=document.querySelector(".empty-state__image"),e=document.querySelector(".empty-state__text");switch(i()){case"All":t.classList.remove("hidden"),e.textContent="Как-то пустовато... Добавим новую задачу?";break;case"Active":t.classList.add("hidden"),e.textContent="Активных задач пока нет";break;case"Completed":t.classList.add("hidden"),e.textContent="Вы еще не закончили ни одну задачу"}})()},C=document.querySelector(".clear-completed"),A=document.querySelector(".input"),w=document.querySelector(".todo__input-wrapper__icon"),x=document.querySelector(".todo__input-wrapper__icon"),q=document.querySelector(".input");q.addEventListener("focus",(()=>{x.classList.add("todo__input-wrapper_icon_shown")})),q.addEventListener("blur",(()=>{x.classList.remove("todo__input-wrapper_icon_shown")}));q.addEventListener("keydown",(t=>{"Escape"!==t.key&&"Tab"!==t.key||(q.value="",q.blur())})),document.addEventListener("keypress",(()=>{q.focus()})),q.focus();const N=document.querySelector(".input"),U=t=>{t.addEventListener("click",(({target:t})=>{const{id:e}=t.closest(".todo-task").dataset;Q(e),et(e),n(),v(),k(),S()&&E(),N.focus()}))},I=t=>{t.addEventListener("click",(({target:e})=>{if(!e.classList.contains("todo-task__remove-btn")){const{id:e}=t.dataset;t.classList.contains("todo-task_completed")?(Y(e),ct(t)):(Z(e),st(t)),v(),k(),"All"!==i()&&(et(e),n()),S()&&E()}}))},O=[U,I],T=t=>{if("Enter"===t.key||"blur"===t.type){const e=t.target.value;if(e){const t=G(e);K(t),"Active"!==i()&&"All"!==i()||(ot(t,O),S()||b()),n(),v()}q.value=""}},$=()=>JSON.parse(localStorage.getItem("tasks"))||[];var j={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let D;const B=new Uint8Array(16);function J(){if(!D&&(D="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!D))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return D(B)}const R=[];for(let t=0;t<256;++t)R.push((t+256).toString(16).slice(1));function V(t,e=0){return(R[t[e+0]]+R[t[e+1]]+R[t[e+2]]+R[t[e+3]]+"-"+R[t[e+4]]+R[t[e+5]]+"-"+R[t[e+6]]+R[t[e+7]]+"-"+R[t[e+8]]+R[t[e+9]]+"-"+R[t[e+10]]+R[t[e+11]]+R[t[e+12]]+R[t[e+13]]+R[t[e+14]]+R[t[e+15]]).toLowerCase()}var H=function(t,e,o){if(j.randomUUID&&!e&&!t)return j.randomUUID();const s=(t=t||{}).random||(t.rng||J)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e){o=o||0;for(let t=0;t<16;++t)e[o+t]=s[t];return e}return V(s)};let M=$()||[];const F=()=>M||$(),P=t=>F().filter((e=>e.status===t))||[],z=(t=[])=>{M=t,(t=>{localStorage.setItem("tasks",JSON.stringify(t))})(t)},G=t=>({id:H(),status:"Active",text:t}),K=t=>{const e=F()||[];z([...e,t])},Q=t=>{const e=F().filter((e=>e.id!==t));z(e)},W=t=>{const e=F().filter((e=>e.status!==t));z(e)},X=(t,e)=>{const o=F().map((o=>o.id===t?((t,e)=>Object.assign(Object.assign({},t),{status:e}))(o,e):o));z(o)},Y=t=>{X(t,"Active")},Z=t=>{X(t,"Completed")},tt=document.getElementsByClassName("todo__list")[0],et=t=>{tt.childNodes.forEach((e=>{if(e.dataset.id===t)return e.remove(),0}))},ot=(t,e)=>{tt.prepend((({id:t,status:e,text:o},s=[])=>{const c=document.createElement("div");return c.classList.add("todo-task"),"Completed"===e&&c.classList.add("todo-task_completed"),c.dataset.id=t,c.dataset.status=e,c.innerHTML=`<div class="checkbox todo-task__checkbox"><input type="checkbox" ${"Completed"===e&&"checked"} class="checkbox__input"> <span class="fake-control fake-control_type_checkbox"></span><p class="task__text">${o}</p><img class="todo-task__remove-btn" src="assets/cross-23.svg" alt="Remove"></div>`,((t,e)=>{e.forEach(((e,o)=>e(t[o])))})([c.querySelector(".todo-task__remove-btn"),c],s),c})(t,e))},st=t=>{t.classList.add("todo-task_completed"),t.getElementsByClassName("checkbox__input")[0].checked=!0},ct=t=>{t.classList.remove("todo-task_completed"),t.getElementsByClassName("checkbox__input")[0].checked=!1},nt=t=>{const e="All"!==i()?P(i()):F();tt.innerHTML="",S()?E():(b(),e.forEach((e=>{ot(e,t)})))},rt=()=>{[...tt.childNodes].forEach((t=>{t.classList.contains("todo-task_completed")&&t.remove()}))};nt(),document.querySelectorAll(".todo-task").forEach((t=>I(t))),document.querySelectorAll(".todo-task__remove-btn").forEach((t=>{U(t)})),q.addEventListener("keypress",(t=>{"Enter"===t.key&&T(t)})),q.addEventListener("blur",(t=>{T(t)})),r.forEach((t=>{t.addEventListener("click",(t=>{const e=t.target;if((t=>!t.classList.contains("filter__item_active"))(e)){u(r),m(e);const t=e.dataset.filter;d(t),o(t),n(),nt(O)}}))})),m(_()),v(),o(i()),n(),k(),C.addEventListener("click",(()=>{W("Completed"),rt(),n(),v(),k(),S()&&E()})),w.addEventListener("mousedown",(()=>{A.value=""}))}();