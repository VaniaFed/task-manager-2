!function(){var t={150:function(){const t=document.querySelector(".input");document.querySelector(".todo__input-wrapper__icon").addEventListener("mousedown",(()=>{t.value=""}))}},e={};function o(n){var s=e[n];if(void 0!==s)return s.exports;var c=e[n]={exports:{}};return t[n](c,c.exports,o),c.exports}o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),function(){var t;o.g.importScripts&&(t=o.g.location+"");var e=o.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t}(),function(){"use strict";o.p;const t=document.querySelector(".todo-title").childNodes[0],e=e=>{switch(e){case"All":t.textContent="Все задачи";break;case"Active":t.textContent="Активные";break;case"Completed":t.textContent="Завершенные"}};var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let s;const c=new Uint8Array(16);function r(){if(!s&&(s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!s))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(c)}const a=[];for(let t=0;t<256;++t)a.push((t+256).toString(16).slice(1));function d(t,e=0){return(a[t[e+0]]+a[t[e+1]]+a[t[e+2]]+a[t[e+3]]+"-"+a[t[e+4]]+a[t[e+5]]+"-"+a[t[e+6]]+a[t[e+7]]+"-"+a[t[e+8]]+a[t[e+9]]+"-"+a[t[e+10]]+a[t[e+11]]+a[t[e+12]]+a[t[e+13]]+a[t[e+14]]+a[t[e+15]]).toLowerCase()}var i=function(t,e,o){if(n.randomUUID&&!e&&!t)return n.randomUUID();const s=(t=t||{}).random||(t.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e){o=o||0;for(let t=0;t<16;++t)e[o+t]=s[t];return e}return d(s)};const l=()=>JSON.parse(localStorage.getItem("tasks"));let u=l()||[];const p=()=>u||l(),m=t=>p().filter((e=>e.status===t))||[],f=(t=[])=>{u=t,(t=>{localStorage.setItem("tasks",JSON.stringify(t))})(t)},_=(t,e)=>{const o=p().map((o=>o.id===t?((t,e)=>Object.assign(Object.assign({},t),{status:e}))(o,e):o));f(o)},v=()=>JSON.parse(localStorage.getItem("filter"))||"All";let h=v();const y=()=>h||v(),g=t=>{h=t,(t=>{localStorage.setItem("filter",JSON.stringify(t))})(t)},k=document.querySelector(".todo-title__counter"),L=t=>{k.textContent=`(${t})`},S=()=>{"All"===y()?L(p().length):L(m(y()).length)},b=()=>0===p().length&&"All"===y()||0===m("Active").length&&"Active"===y()||0===m("Completed").length&&"Completed"===y(),E=document.querySelector(".empty-state"),C=()=>{E.classList.add("hidden")},x=()=>{E.classList.remove("hidden"),(()=>{const t=document.querySelector(".empty-state__image"),e=document.querySelector(".empty-state__text");switch(y()){case"All":t.classList.remove("hidden"),e.textContent="Как-то пустовато... Добавим новую задачу?";break;case"Active":t.classList.add("hidden"),e.textContent="Активных задач пока нет";break;case"Completed":t.classList.add("hidden"),e.textContent="Вы еще не закончили ни одну задачу"}})()},A=document.getElementsByClassName("todo__list")[0],w=t=>{A.childNodes.forEach((e=>{if(e.dataset.id===t)return e.remove(),0}))},q=(t,e)=>{A.prepend((({id:t,status:e,value:o},n=[])=>{const s=document.createElement("div");return s.classList.add("todo-task"),"Completed"===e&&s.classList.add("todo-task_completed"),s.dataset.id=t,s.dataset.status=e,s.innerHTML=`<div class="checkbox todo-task__checkbox"><input type="checkbox" ${"Completed"===e&&"checked"} class="checkbox__input"> <span class="fake-control fake-control_type_checkbox"></span><p class="task__text">${o}</p><img class="todo-task__remove-btn" src="assets/cross-23.svg" alt="Remove"></div>`,((t,e)=>{e.forEach(((e,o)=>e(t[o])))})([s.querySelector(".todo-task__remove-btn"),s],n),s})(t,e))},N=t=>{const e="All"!==y()?m(y()):p();A.innerHTML="",b()?x():(C(),e.forEach((e=>{q(e,t)})))},U=document.querySelector("[data-filter-counter=All]"),I=document.querySelector("[data-filter-counter=Active]"),O=document.querySelector("[data-filter-counter=Completed]"),T=()=>{const t=p(),e=m("Active"),o=m("Completed");U.textContent=t.length,I.textContent=e.length,O.textContent=o.length},$=document.querySelector(".clear-completed"),j=()=>{m("Completed").length>0?$.classList.remove("hidden"):$.classList.add("hidden")},D=document.querySelector(".todo__input-wrapper__icon"),B=document.querySelector(".input");B.addEventListener("focus",(()=>{D.classList.add("todo__input-wrapper_icon_shown")})),B.addEventListener("blur",(()=>{D.classList.remove("todo__input-wrapper_icon_shown")}));B.addEventListener("keydown",(t=>{"Escape"!==t.key&&"Tab"!==t.key||(B.value="",B.blur())})),document.addEventListener("keypress",(()=>{B.focus()})),B.focus(),B.addEventListener("keypress",(t=>{"Enter"===t.key&&M(t)})),B.addEventListener("blur",(t=>{M(t)}));const J=document.querySelector(".input"),R=t=>{t.addEventListener("click",(({target:t})=>{const{id:e}=t.parentNode.parentNode.dataset;(t=>{const e=p().filter((e=>e.id!==t));f(e)})(e),w(e),S(),T(),j(),b()&&x(),J.focus()}))},V=t=>{t.addEventListener("click",(({target:e})=>{if(!e.classList.contains("todo-task__remove-btn")){const{id:e}=t.dataset;t.classList.contains("todo-task_completed")?((t=>{_(t,"Active")})(e),(t=>{t.classList.remove("todo-task_completed"),t.getElementsByClassName("checkbox__input")[0].checked=!1})(t)):((t=>{_(t,"Completed")})(e),(t=>{t.classList.add("todo-task_completed"),t.getElementsByClassName("checkbox__input")[0].checked=!0})(t)),T(),j(),"All"!==y()&&(w(e),S()),b()&&x()}}))},H=[R,V],M=t=>{if("Enter"===t.key||"blur"===t.type){const o=t.target.value;if(o){const t=(e=o,{id:i(),status:"Active",value:e});(t=>{const e=p()||[];f([...e,t])})(t),"Active"!==y()&&"All"!==y()||(q(t,H),b()||C()),S(),T()}B.value=""}var e},F=t=>{t.classList.add("filter__item_active")},P=document.querySelectorAll(".filter__item");F([...P].filter((t=>t.dataset.filter===y()))[0]),P.forEach((t=>{t.addEventListener("click",(t=>{const o=t.target;if((t=>!t.classList.contains("filter__item_active"))(o)){P.forEach((t=>{t.classList.remove("filter__item_active")})),F(o);const t=o.dataset.filter;g(t),e(t),S(),N(H)}}))}));o(150);const z=document.querySelector(".clear-completed"),G=()=>{z.addEventListener("click",(()=>{(t=>{const e=p().filter((e=>e.status!==t));f(e)})("Completed"),[...A.childNodes].forEach((t=>{t.classList.contains("todo-task_completed")&&t.remove()})),S(),T(),j(),b()&&x()}))};N(),document.querySelectorAll(".todo-task").forEach((t=>V(t))),document.querySelectorAll(".todo-task__remove-btn").forEach((t=>{R(t)})),e(y()),S(),T(),j(),G()}()}();